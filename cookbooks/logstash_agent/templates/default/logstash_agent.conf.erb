input {

	<% @patterns.each do |pattern| %>
	file {
		type			=> "<%=pattern[:name]%>"
		add_field 		=> [ "logstash_source", "<%= Chef::Config[:node_name] %>" ]
		path			=> [ "<%=pattern[:url]%>" ]
		sincedb_path		=> "/usr/share/logstash/.sincedb"
	}
	<% end %>
	
}
output {
	stdout {
		debug			=> true
		debug_format		=> "json"
	}
	redis {
		host			=> "<%= node['collector']['ip'] %>"
		data_type		=> "list"
		key			=> "intech_devaas_logstash_key"
	}
}
